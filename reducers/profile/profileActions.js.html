<!DOCTYPE html>
<html>
<head>
  <title>profileActions.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../", thisFile = "Users/barton/projects/snowflakework/snowflake//reducers/profile/profileActions.js", defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
      <div class="heading h1">
        <a href="#profileactions.js">profileActions.js</a>
      </div>
      <div class="heading h2">
        <a href="#imports">Imports</a>
      </div>
      <div class="heading h2">
        <a href="#retreiving%20profile%20actions">retreiving profile actions</a>
      </div>
      <div class="heading h2">
        <a href="#state%20actions">State actions</a>
      </div>
      <div class="heading h2">
        <a href="#state%20actions">State actions</a>
      </div>
      <div class="heading h2">
        <a href="#updateprofile">updateProfile</a>
      </div>
      <div class="heading h2">
        <a href="#onprofileformfieldchange">onProfileFormFieldChange</a>
      </div>
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="profileactions.js">
  <h1>
    <a href="#profileactions.js" name="profileactions.js" class="pilcrow">&#182;</a>
    profileActions.js
  </h1>
</div>

  </div>
  <div class="body"><p>The actions to support the users profile</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="imports">
  <h2>
    <a href="#imports" name="imports" class="pilcrow">&#182;</a>
    Imports
  </h2>
</div>

  </div>
  <div class="body"><p>The actions for profile</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kr">const</span> <span class="p">{</span>
  <span class="nx">GET_PROFILE_REQUEST</span><span class="p">,</span>
  <span class="nx">GET_PROFILE_SUCCESS</span><span class="p">,</span>
  <span class="nx">GET_PROFILE_FAILURE</span><span class="p">,</span>

  <span class="nx">PROFILE_UPDATE_REQUEST</span><span class="p">,</span>
  <span class="nx">PROFILE_UPDATE_SUCCESS</span><span class="p">,</span>
  <span class="nx">PROFILE_UPDATE_FAILURE</span><span class="p">,</span>

  <span class="nx">ON_PROFILE_FORM_FIELD_CHANGE</span>
<span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../../lib/constants&#39;</span><span class="p">).</span><span class="k">default</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>BackendFactory - base class for server implementation
AppAuthToken for localStorage sessionToken access </p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kr">const</span> <span class="nx">BackendFactory</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../../lib/BackendFactory&#39;</span><span class="p">).</span><span class="k">default</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">AppAuthToken</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../../lib/AppAuthToken&#39;</span><span class="p">).</span><span class="k">default</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="retreiving%20profile%20actions">
  <h2>
    <a href="#retreiving%20profile%20actions" name="retreiving%20profile%20actions" class="pilcrow">&#182;</a>
    retreiving profile actions
  </h2>
</div>

  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kr">export</span> <span class="kd">function</span> <span class="nx">getProfileRequest</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="nx">GET_PROFILE_REQUEST</span>
  <span class="p">};</span>
<span class="p">}</span>
<span class="kr">export</span> <span class="kd">function</span> <span class="nx">getProfileSuccess</span><span class="p">(</span><span class="nx">json</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="nx">GET_PROFILE_SUCCESS</span><span class="p">,</span>
    <span class="nx">payload</span><span class="o">:</span> <span class="nx">json</span>
  <span class="p">};</span>
<span class="p">}</span>
<span class="kr">export</span> <span class="kd">function</span> <span class="nx">getProfileFailure</span><span class="p">(</span><span class="nx">json</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="nx">GET_PROFILE_FAILURE</span><span class="p">,</span>
    <span class="nx">payload</span><span class="o">:</span> <span class="nx">json</span>
  <span class="p">};</span>
<span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="state%20actions">
  <h2>
    <a href="#state%20actions" name="state%20actions" class="pilcrow">&#182;</a>
    State actions
  </h2>
</div>


<p>controls which form is displayed to the user
as in login, register, logout or reset password</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kr">export</span> <span class="kd">function</span> <span class="nx">getProfile</span><span class="p">(</span><span class="nx">sessionToken</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">dispatch</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">dispatch</span><span class="p">(</span><span class="nx">getProfileRequest</span><span class="p">());</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6">&#182;</a>
</div>
<p>store or get a sessionToken</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">AppAuthToken</span><span class="p">().</span><span class="nx">getSessionToken</span><span class="p">(</span><span class="nx">sessionToken</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">token</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">BackendFactory</span><span class="p">(</span><span class="nx">token</span><span class="p">).</span><span class="nx">getProfile</span><span class="p">();</span>
      <span class="p">})</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">json</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nx">dispatch</span><span class="p">(</span><span class="nx">getProfileSuccess</span><span class="p">(</span><span class="nx">json</span><span class="p">));</span>
      <span class="p">})</span>
      <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">dispatch</span><span class="p">(</span><span class="nx">getProfileFailure</span><span class="p">(</span><span class="nx">error</span><span class="p">));</span>
      <span class="p">});</span>
  <span class="p">};</span>
<span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="state%20actions">
  <h2>
    <a href="#state%20actions" name="state%20actions" class="pilcrow">&#182;</a>
    State actions
  </h2>
</div>


<p>controls which form is displayed to the user
as in login, register, logout or reset password</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kr">export</span> <span class="kd">function</span> <span class="nx">profileUpdateRequest</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="nx">PROFILE_UPDATE_REQUEST</span>
  <span class="p">};</span>
<span class="p">}</span>
<span class="kr">export</span> <span class="kd">function</span> <span class="nx">profileUpdateSuccess</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="nx">PROFILE_UPDATE_SUCCESS</span>
  <span class="p">};</span>
<span class="p">}</span>
<span class="kr">export</span> <span class="kd">function</span> <span class="nx">profileUpdateFailure</span><span class="p">(</span><span class="nx">json</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="nx">PROFILE_UPDATE_FAILURE</span><span class="p">,</span>
    <span class="nx">payload</span><span class="o">:</span> <span class="nx">json</span>
  <span class="p">};</span>
<span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="updateprofile">
  <h2>
    <a href="#updateprofile" name="updateprofile" class="pilcrow">&#182;</a>
    updateProfile
  </h2>
</div>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">userId</span>
      <span class="dox_type">string</span>
      <span><ul>
<li>objectId </li>
</ul></span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">username</span>
      <span class="dox_type">string</span>
      <span><ul>
<li>the users name</li>
</ul></span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">{string]email-user'semail</span>
      <span class="dox_type">string]email-user&#x27;semail</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">sessionToken</span>
      <span class="dox_type">Object</span>
      <span><ul>
<li>the sessionToken from Parse.com</li>
</ul>

The sessionToken is provided when Hot Loading.

With the sessionToken, Parse.com is called with the data to update
If successful, get the profile so that the screen is updated with
the data as now persisted on Parse.com</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kr">export</span> <span class="kd">function</span> <span class="nx">updateProfile</span><span class="p">(</span><span class="nx">userId</span><span class="p">,</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">sessionToken</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">dispatch</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">dispatch</span><span class="p">(</span><span class="nx">profileUpdateRequest</span><span class="p">());</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">AppAuthToken</span><span class="p">().</span><span class="nx">getSessionToken</span><span class="p">(</span><span class="nx">sessionToken</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">token</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">BackendFactory</span><span class="p">(</span><span class="nx">token</span><span class="p">).</span><span class="nx">updateProfile</span><span class="p">(</span><span class="nx">userId</span><span class="p">,</span>
          <span class="p">{</span>
            <span class="nx">username</span><span class="o">:</span> <span class="nx">username</span><span class="p">,</span>
            <span class="nx">email</span><span class="o">:</span> <span class="nx">email</span>
          <span class="p">}</span>
        <span class="p">);</span>
      <span class="p">})</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nx">dispatch</span><span class="p">(</span><span class="nx">profileUpdateSuccess</span><span class="p">());</span>
          <span class="nx">dispatch</span><span class="p">(</span><span class="nx">getProfile</span><span class="p">());</span>
      <span class="p">})</span>
      <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">dispatch</span><span class="p">(</span><span class="nx">profileUpdateFailure</span><span class="p">(</span><span class="nx">error</span><span class="p">));</span>
      <span class="p">});</span>
  <span class="p">};</span>
<span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="onprofileformfieldchange">
  <h2>
    <a href="#onprofileformfieldchange" name="onprofileformfieldchange" class="pilcrow">&#182;</a>
    onProfileFormFieldChange
  </h2>
</div>

  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kr">export</span> <span class="kd">function</span> <span class="nx">onProfileFormFieldChange</span><span class="p">(</span><span class="nx">field</span><span class="p">,</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="nx">ON_PROFILE_FORM_FIELD_CHANGE</span><span class="p">,</span>
    <span class="nx">payload</span><span class="o">:</span> <span class="p">{</span><span class="nx">field</span><span class="o">:</span> <span class="nx">field</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="nx">value</span><span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
